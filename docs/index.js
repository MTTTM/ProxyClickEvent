!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).ProxyClickEvent=o()}(this,(function(){function e(e){var o=this;o.eventPool=[],o._proxyBox=e||document.body,o._bind_clearRemoveDomEventItem=o._clearRemoveDomEventItem.bind(o),o._timer=setInterval((function(){o._bind_clearRemoveDomEventItem()}),1e3),o.__bindEvent=o._bindEvent.bind(o),o._proxyBox.addEventListener("click",o.__bindEvent)}return e.prototype._clearRemoveDomEventItem=function(){this.eventPool.some((e=>!document.body.contains(e.dom)))&&(this.eventPool=this.eventPool.filter((e=>document.body.contains(e.dom))))},e.prototype._bindEvent=function(e){let o=this,t=e.target;for(let n=o.eventPool.length-1;n>=0;n--){let i=o.eventPool[n],r=i.fn;if(i.dom==t)r(e);else if(!e.__stop&&i.dom.contains(t))r(e);else if(e.__stop)break}},e.prototype.add=function(e,o){if(!(e instanceof HTMLElement))throw console.error("invalid parameter dom",e,"fn",o),"function add arg1 should be a HTMLElement,but get "+typeof e;if("function"!=typeof o)throw console.error("invalid parameter dom",e,"fn",o),"function add arg2 should be a function,but get "+typeof o;if(this.eventPool.some((o=>o.dom===e))){let o=this.eventPool.filter((o=>o.dom===e))[0];throw console.error("本次添加点击事件的dom被拒绝，该dom是",e,"它已经关联了函数:",o),"该dom已有关联的点击回调函数，本次add被拒绝"}this.eventPool.push({dom:e,fn:o})},e.prototype.remove=function(e,o){this.eventPool=this.eventPool.filter((t=>t.dom!=e&&t.fn!=o))},e.prototype.clear=function(e,o){this.eventPool=[]},e.prototype.destroy=function(){this.eventPool=[],this._proxyBox.removeEventListener("click",this.__bindEvent),clearInterval(this._timer)},e}));
